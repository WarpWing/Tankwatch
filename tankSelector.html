<!DOCTYPE html>
<html>
<head>
  <title>Tank Selector</title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      font-family: Arial, sans-serif;
      color: white;
      background-color: rgba(0, 0, 0, 0.5);
    }
    #container {
      display: flex;
      flex-direction: column;
      height: 100%;
    }
    #current-tank {
      display: flex;
      align-items: center;
      padding: 10px;
    }
    #current-tank-icon {
      width: 60px;
      height: 60px;
      margin-right: 10px;
    }
    #current-tank-name {
      font-size: 24px;
      font-weight: bold;
    }
    #matchup-display {
      display: flex;
      overflow-x: auto;
      padding: 10px;
    }
    .matchup-category {
      margin-right: 20px;
      min-width: 120px;
    }
    .matchup-category h3 {
      margin-bottom: 5px;
    }
    .matchup-heroes {
      display: flex;
      flex-wrap: wrap;
    }
    .matchup-hero {
      width: 40px;
      height: 40px;
      margin: 2px;
    }
  </style>
</head>
<body>
  <div id="container">
    <div id="current-tank">
      <img id="current-tank-icon" src="" alt="Current Tank">
      <span id="current-tank-name"></span>
    </div>
    <div id="matchup-display"></div>
  </div>

  <script>
    const { ipcRenderer } = require('electron');

    let tanks = [];
    let matchups = {};
    let selectedTank = 'D.Va';

    ipcRenderer.on('tank-data', (event, data) => {
      tanks = data.heroes;
      matchups = data.matchups;
      updateMatchupDisplay(selectedTank);
    });

    ipcRenderer.on('update-selected-tank', (event, tankName) => {
      selectedTank = tankName;
      updateMatchupDisplay(selectedTank);
    });

    function updateMatchupDisplay(tankName) {
      const currentTankIcon = document.getElementById('current-tank-icon');
      const currentTankName = document.getElementById('current-tank-name');
      const matchupDisplay = document.getElementById('matchup-display');
      
      const currentTank = tanks.find(t => t.name === tankName);
      if (currentTank) {
        currentTankIcon.src = currentTank.portrait;
        currentTankName.textContent = currentTank.name;
      }

      matchupDisplay.innerHTML = '';
      const tankMatchups = matchups[tankName];
      if (!tankMatchups) return;

      const categories = tankName === 'Zarya' 
        ? ['FREELO', 'Winning', 'WinningCharge', 'Neutral', 'NeutralCharge', 'Losing', 'LosingCharge', 'SWAP', 'SWAPCharge']
        : ['FREELO', 'Winning', 'Neutral', 'Losing', 'SWAP'];

      categories.forEach(category => {
        if (tankMatchups[category] && tankMatchups[category].length > 0) {
          const div = document.createElement('div');
          div.className = 'matchup-category';
          div.innerHTML = `<h3>${category}</h3>`;
          const heroesDiv = document.createElement('div');
          heroesDiv.className = 'matchup-heroes';
          tankMatchups[category].forEach(heroName => {
            const hero = tanks.find(t => t.name === heroName);
            if (hero) {
              const img = document.createElement('img');
              img.src = hero.portrait;
              img.alt = hero.name;
              img.className = 'matchup-hero';
              heroesDiv.appendChild(img);
            }
          });
          div.appendChild(heroesDiv);
          matchupDisplay.appendChild(div);
        }
      });
    }
  </script>
</body>
</html>